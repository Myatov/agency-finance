# QA Чек-лист тестирования

## Дата: 2026-01-21

---

## 1. SMOKE-ТЕСТ СТРАНИЦ

### ✅ Базовые страницы (должны загружаться без ошибок):
- [ ] `/login` - страница входа
- [ ] `/clients` - список клиентов
- [ ] `/sites` - список сайтов
- [ ] `/services` - список услуг
- [ ] `/incomes` - список доходов
- [ ] `/expenses` - список расходов
- [ ] `/employees` - список сотрудников
- [ ] `/products` - список продуктов
- [ ] `/reports` - отчеты
- [ ] `/legal-entities` - юридические лица (только OWNER/CEO)
- [ ] `/roles` - роли (только OWNER)

---

## 2. ТЕСТИРОВАНИЕ ПО РОЛЯМ

### 2.1 OWNER (пароль: 1407)
- [ ] Вход работает
- [ ] Доступ ко всем разделам
- [ ] Раздел "Роли" открывается и работает
- [ ] Раздел "Юрлица" открывается и работает
- [ ] Может создавать/редактировать/удалять клиентов
- [ ] Может создавать/редактировать/удалять сайты
- [ ] Может создавать/редактировать/удалять услуги
- [ ] Может создавать/редактировать/удалять доходы
- [ ] Может создавать/редактировать/удалять расходы
- [ ] Может управлять сотрудниками
- [ ] Может управлять продуктами (drag-n-drop работает)
- [ ] Может генерировать все отчеты

### 2.2 CEO (пароль: mng)
- [ ] Вход работает
- [ ] Доступ ко всем разделам кроме "Роли"
- [ ] Раздел "Роли" недоступен (403 или редирект)
- [ ] Раздел "Юрлица" открывается и работает
- [ ] Может создавать/редактировать/удалять клиентов
- [ ] Может создавать/редактировать/удалять сайты
- [ ] Может создавать/редактировать/удалять услуги
- [ ] Может создавать/редактировать/удалять доходы
- [ ] Может создавать/редактировать/удалять расходы
- [ ] Может управлять сотрудниками
- [ ] Может управлять продуктами (drag-n-drop работает)
- [ ] Может генерировать все отчеты

### 2.3 ACCOUNT_MANAGER
- [ ] Вход работает
- [ ] Видит только свои сайты (где accountManagerId или creatorId)
- [ ] Видит услуги только своих сайтов
- [ ] Может добавлять доход только к услуге своего сайта
- [ ] Может создавать/редактировать услуги только для своих сайтов
- [ ] Может добавлять расходы
- [ ] Может редактировать только свои расходы
- [ ] Не видит раздел "Роли"
- [ ] Не видит раздел "Юрлица" (или только просмотр)
- [ ] Отчеты показывают только данные по своим сайтам

### 2.4 SELLER
- [ ] Вход работает
- [ ] Видит только сайты своих клиентов
- [ ] Может добавлять доход только по своим клиентам/услугам
- [ ] Не может редактировать доходы (кроме своих)
- [ ] Может добавлять расходы
- [ ] Не видит раздел "Роли"
- [ ] Не видит раздел "Юрлица" (или только просмотр)
- [ ] Отчеты показывают только данные по своим клиентам

### 2.5 EMPLOYEE
- [ ] Вход работает
- [ ] Может добавлять расходы
- [ ] Не может добавлять доходы
- [ ] Не видит раздел "Роли"
- [ ] Не видит раздел "Юрлица" (или только просмотр)
- [ ] Не видит раздел "Продукты" (или только просмотр)

---

## 3. КЛЮЧЕВЫЕ СЦЕНАРИИ

### 3.1 Создание цепочки: Клиент → Сайт → Услуги → Доход → Расход
- [ ] Создать клиента
- [ ] Создать сайт для клиента
- [ ] Создать несколько услуг для сайта
- [ ] Создать доход к услуге (обязательно выбирается услуга)
- [ ] Создать расход с услугой
- [ ] Создать расход без услуги (только к сайту)
- [ ] Все данные отображаются корректно

### 3.2 Отчеты
- [ ] Отчет по доходам:
  - [ ] Колонка "Услуга" присутствует
  - [ ] Фильтр по услуге работает
  - [ ] Фильтр по сайту работает
  - [ ] Фильтр по клиенту работает
  - [ ] Итоговая сумма считается корректно
  - [ ] Количество записей корректно
- [ ] Отчет по расходам:
  - [ ] Колонка "Услуга" присутствует (если есть)
  - [ ] Фильтр по услуге работает
  - [ ] Фильтр по сайту работает
  - [ ] Итоговая сумма считается корректно
- [ ] Отчет по сотрудникам:
  - [ ] Показывает доходы и расходы по сотрудникам
  - [ ] Разница считается корректно
  - [ ] Фильтр по дате работает

### 3.3 Продукты
- [ ] Drag-n-drop порядок сохраняется
- [ ] Порядок отражается во всех селектах услуг
- [ ] Порядок сохраняется после перезагрузки страницы

---

## 4. ПРОВЕРКА ПРОИЗВОДИТЕЛЬНОСТИ

### 4.1 Отчет по сотрудникам
**Тест**: Генерация отчета за 30 дней
- [ ] Время выполнения: _____ ms
- [ ] Количество запросов к БД: _____
- [ ] Данные отображаются корректно

### 4.2 Отчет по доходам
**Тест**: Генерация отчета за 30 дней
- [ ] Время выполнения: _____ ms
- [ ] Количество запросов к БД: _____
- [ ] Итоговая сумма корректна
- [ ] Данные отображаются корректно

### 4.3 Отчет по расходам
**Тест**: Генерация отчета за 30 дней
- [ ] Время выполнения: _____ ms
- [ ] Количество запросов к БД: _____
- [ ] Итоговая сумма корректна
- [ ] Данные отображаются корректно

### 4.4 Загрузка страниц
- [ ] Страница "Доходы": _____ ms
- [ ] Страница "Расходы": _____ ms
- [ ] Страница "Сайты": _____ ms
- [ ] Страница "Услуги": _____ ms

---

## 5. РЕГРЕССИИ

### Найденные баги:
1. ________________________________
2. ________________________________
3. ________________________________

### Исправленные баги:
1. ________________________________
2. ________________________________
3. ________________________________

---

## 6. ИТОГОВЫЙ СТАТУС

- [ ] Все smoke-тесты пройдены
- [ ] Все роли протестированы
- [ ] Все ключевые сценарии работают
- [ ] Производительность улучшена
- [ ] Нет критических регрессий
- [ ] Build проходит без ошибок
- [ ] Lint проходит без ошибок

**Статус**: ⬜ В процессе / ✅ Пройдено / ❌ Провалено

**Дата завершения**: ___________

**Тестировщик**: ___________
